.. _documentation-adding:

======================================
Добавление новых разделов документации
======================================

Вся документация проекта находится в директории *docs/* (относительно
корня репозитория). Документация основана на системе `Sphinx
<http://sphinx.pocoo.org/>`_, а формат исходных текстовых файлов --
`reStructured Text <http://docutils.sourceforge.net/rst.html>`_. Sphinx
представляет из себя систему объединения разрозненных текстовых
исходных файлов в нечто связанное ссылками и с возможностью
генерирования списков документов.

Каждая страница документации -- отдельный файл. Безусловно возможно
создание иерархии документов (создание поддиректорий).

Для создания новой страницы документации достаточно написать какой-либо
файл в .rst формате. В самое начало документа добавить строку по
которой можно было бы сослаться на этот документ. Например::

  .. _documentation-adding:

Данный идентификатор (documentation-adding) нужно внести в TOC
вышестоящего index.rst файла директории. Например::

  .. toctree::
     :maxdepth: 1
  
     documentation_adding

Чтобы сослаться на этот документ не только в TOC-е, то необходимо
использовать конструкцию::

  :ref:`descriptive test <document-id>`

Которая создаст внутреннюю ссылку на документ с идентификатором
*document-id* и текстом *descriptive test*.

Генерирование документации
==========================
Для генерирования документации необходимо иметь:

* `Sphinx <http://sphinx.pocoo.org/>`_
* `GraphViz <http://graphviz.org/>`_
* `Pngcrush <http://pmt.sourceforge.net/pngcrush/>`_

Установить Sphinx можно выполнением команды, имея работающий
интерпретатор Python и его систему установки пакетов easy_install::

  easy_install -U Sphinx

Сгенерировать документацию, то есть преобразовать в набор .html файлов,
можно командой::

  make html

в директории *docs/*. При этом также будут выданы ошибки и
предупреждения например о каких-либо недочётах во взаимосвязях между
документами.

Программы GraphViz и Pngcrush можно взять из репозиториев.
