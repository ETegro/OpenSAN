.. _git-pretagging_merges:
.. vim: syntax=rst
.. vim: textwidth=72
.. vim: spell spelllang=ru,en

===================================
Использование tag-ов при merge-инге
===================================

Версионирования состояния ссылок (refs) в git-е не происходит. Когда
производится fast-forward то ссылка ветки master просто обновляется
путём её пересылки на более поздние коммиты. Если это портит всякое и
приводит к нежелательным последствиям, то вернуть всё как было довольно
проблематично, ибо нигде нет информации о предыдущем состоянии (конечно
не исключено что оно есть в remote-ах, но это лишь частный случай).

Проблему можно решить просто запомнив текущее состояние ссылки master-а
(или иной ветки). Это легко но не шибко дружелюбно к пользователю. А
удобно это можно сделать например или созданием новой ветки, которая
сошлётся на тот же самый коммит который был в момент ответвления,
или же использованием tag-ов. А более конкретно -- lightweight
тэгов, которые по своей природе не отличаются от ссылок. Отличие же
легковесного тэга от не онного заключается в отсутствии сообщения,
которое обычно ещё и подписывается PGP.

Сами по себе, логически, tag-и отлично для этого подходят. Если
имеются опасения и неуверенности в merge-е, то:

* перед этим действием можно создать tag::

  % git tag foobar

* затем произвести merge
* если всё в порядке, то удалить tag::

  % git tag -d foobar

* если нет, то вернутся в состояние когда tag был сделан::

  % git checkout foobar
