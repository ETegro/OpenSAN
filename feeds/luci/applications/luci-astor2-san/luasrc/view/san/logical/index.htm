<%#
  aStor2 -- storage area network configurable via Web-interface
  Copyright (C) 2009-2011 ETegro Technologies, PLC
                          Vladimir Petukhov (vladimir.petukhov@etegro.com)
  
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
%>

<td valign="top"
    rowspan="<%= line.logical.rowspan %>"
    class="<%+san/logical/class%>">

<table border="0px" width="100%" cellpadding="0" cellspacing="0">
	<tr>
		<td>
			<%= line.logical.id %>
		</td>
		<td>
			<%: RAID %> <%= line.logical.level %>
		</td>
		<td>
			<%= line.logical.state %>
		</td>
		<% if line.logical.progress then %>
			<td>(<%= line.logical.progress %> %)</td>
		<% end %>
		<% if #common.keys( line.logical.logical_volumes ) == 0 then %>
			<%+san/logical/remove%>
		<% end %>
	</tr>
	<tr>
		<% local local_logical_colspan = 4
		   if line.logical.progress then
			local_logical_colspan = local_logical_colspan + 1
		   end
		   if #common.keys( line.logical.logical_volumes ) == 0 then
			local_logical_colspan = local_logical_colspan + 1
		end %>
		<td colspan="<%= local_logical_colspan %>">
			<%+san/logical/fillbar%>
			<% if ( line.logical.volume_group.total_mib - line.logical.volume_group.allocated_mib ) ~= 0 then %></span>
				<%+san/logical_volume/forms/add%>
			<% end %>
		</td>
	</tr>
</table>

</td>
