<%#
 aStor2 -- storage area network configurable via Web-interface
 Copyright (C) 2009-2011 ETegro Technologies, PLC
                         Vladimir Petukhov (vladimir.petukhov@etegro.com)
 
 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as
 published by the Free Software Foundation, either version 3 of the
 License, or (at your option) any later version.
 
 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.
 
 You should have received a copy of the GNU Affero General Public License
 along with this program.  If not, see http://www.gnu.org/licenses/.
%>

<td valign="top"
    rowspan="<%= line.logical_volume.rowspan %>"
    class="<%+san/matrix_logical_volume_class%>">

<table border="0px" width="100%" cellpadding="0" cellspacing="0">
	<tr>
		<td>
			<%= line.logical_volume.name %>
		</td>
		<td>
			<span title="<%= line.logical_volume.size_mib %> <%: MiB %>">
				<%= line.logical_volume.size %> <%: TiB %>
			</span>
		</td>
		<td>
			<input name="san.submit_logical_volume_remove-<%= line.logical_volume.volume_group.name %>-lv<%= line.logical_volume.name %>END"
			       onclick=" if ( !confirm( '<%: Really remove logical volume? %>' ) )
					 return false;
					 return true;"
			       src="<%=resource%>/cbi/remove.gif"
			       type="image"
			       title="<%: Remove logical volume %>"
			       value="<%: Remove logical volume %>" />
		</td>
		<td>
			<input name="san.logical_volume_select"
			       type ="radio"
			       value="<%= line.logical_volume.device %>" />
		</td>
	</tr>
	<tr>
		<td colspan="4">
			<% if #line.logical_volume.snapshots == 0 then %>
				<div id="logical_volume_resize_slider-<%= line.logical_volume.name %>"></div>
				<div class="inline">
					<%: Resize logical volume %>: <%= line.logical_volume.name %>
				</div>
				<div class="inline">
					<input name="san.submit_logical_volume_resize-<%= line.logical_volume.volume_group.name %>-lv<%= line.logical_volume.name %>END"
					       onclick=" if ( !confirm( '<%: Really resize logical volume? %>' ) )
							 return false;
							 return true;"
					       src="<%=resource%>/cbi/reload.gif"
					       type="image"
					       title="<%: Resize logical volume %>"
					       value="<%: Resize logical volume %>" />
				</div>
				<div>
					<input id="san.logical_volume_resize_slider_size-<%= line.logical_volume.name %>"
					       class="logical_volume_resize_slider_size-<%= line.logical_volume.name %>"
					       name="san.logical_volume_resize_slider_size-<%= line.logical_volume.name %>"
					       readonly="readonly"
					       type="text"
					       value="0" />
				</div>
				<%+san/matrix_logical_volume_slider_resize.js%>
			<% end %>
				<div>
					<a id="volume_logical_info-<%= line.logical_volume.name %>"
					   href="#"
					   class="inline">
						<img src="<%=resource%>/cbi/fieldadd.gif"
						     alt="<%: Snapshot %>"
						     title="<%: Snapshot %>" />
					</a>
				</div>
		</td>
	</tr>
	<tr class="to_hide">
		<td colspan="3">
			<div class="inline">
				<%: Take new snapshot %>
			</div>
			<div class="inline">
				<input name="san.submit_logical_volume_snapshot_add-lvd<%= line.logical_volume.device %>END"
				       src="<%=resource%>/cbi/add.gif"
				       title="<%: Add snapshot %>"
				       type="image"
				       value="<%: Add snapshot %>" />
			</div>
			<div id="new_snapshot_slider-<%= line.logical_volume.name %>"></div>
			<div>
				<input id="san.new_snapshot_slider_size-<%= line.logical_volume.name %>"
				       class="new_snapshot_slider_size-<%= line.logical_volume.name %>"
				       name="san.new_snapshot_slider_size-<%= line.logical_volume.name %>"
				       readonly="readonly"
				       type="text"
				       value="0" />
			</div>
			<%+san/matrix_logical_volume_slider_snapshot_size.js%>
		</td>
	</tr>
</table>

</td>
