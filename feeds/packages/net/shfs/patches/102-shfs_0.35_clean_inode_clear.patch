Index: shfs-0.35/shfs/Linux-2.6/inode.c
===================================================================
--- shfs-0.35.orig/shfs/Linux-2.6/inode.c	2007-06-04 13:22:58.397977440 +0200
+++ shfs-0.35/shfs/Linux-2.6/inode.c	2007-06-04 13:22:58.637940960 +0200
@@ -8,6 +8,7 @@
 #include <linux/modversions.h>
 #endif
 
+#include <linux/version.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
@@ -118,6 +119,9 @@
 	}
 	KMEM_FREE("inode", inode_cache, i);
 out:
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,13))
+   truncate_inode_pages(&inode->i_data, 0);
+#endif
 	clear_inode(inode);
 }
 
